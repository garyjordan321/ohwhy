!function(){var e={6490:function(e,t,n){var o;!function(t){"use strict";var r=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||function(e){return setTimeout(e,16)};function i(){var e=this;e.reads=[],e.writes=[],e.raf=r.bind(t)}function a(e){e.scheduled||(e.scheduled=!0,e.raf(c.bind(null,e)))}function c(e){var t,n=e.writes,o=e.reads;try{o.length,e.runTasks(o),n.length,e.runTasks(n)}catch(e){t=e}if(e.scheduled=!1,(o.length||n.length)&&a(e),t){if(t.message,!e.catch)throw t;e.catch(t)}}function s(e,t){var n=e.indexOf(t);return!!~n&&!!e.splice(n,1)}i.prototype={constructor:i,runTasks:function(e){for(var t;t=e.shift();)t()},measure:function(e,t){var n=t?e.bind(t):e;return this.reads.push(n),a(this),n},mutate:function(e,t){var n=t?e.bind(t):e;return this.writes.push(n),a(this),n},clear:function(e){return s(this.reads,e)||s(this.writes,e)},extend:function(e){if("object"!=typeof e)throw new Error("expected object");var t=Object.create(this);return function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(t,e),t.fastdom=this,t.initialize&&t.initialize(),t},catch:null};var u=t.fastdom=t.fastdom||new i;void 0===(o=function(){return u}.call(u,n,u,e))||(e.exports=o)}("undefined"!=typeof window?window:this)},737:function(e,t){var n,o;void 0===(o="function"==typeof(n=function(){var e,t,n="lscache-",o="-cacheexpiration",r=6e4,i=b(r),a="",c=!1;function s(){var t="__lscachetest__";if(void 0!==e)return e;try{if(!localStorage)return!1}catch(e){return!1}try{m(t,"__lscachetest__"),h(t),e=!0}catch(t){e=!(!u(t)||!localStorage.length)}return e}function u(e){return e&&("QUOTA_EXCEEDED_ERR"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||"QuotaExceededError"===e.name)}function l(){return void 0===t&&(t=null!=window.JSON),t}function d(e){return e+o}function f(){return Math.floor((new Date).getTime()/r)}function p(e){return localStorage.getItem(n+a+e)}function m(e,t){localStorage.removeItem(n+a+e),localStorage.setItem(n+a+e,t)}function h(e){localStorage.removeItem(n+a+e)}function y(e){for(var t=new RegExp("^lscache-"+(a.replace(/[[\]{}()*+?.\\^$|]/g,"\\$&")+"(.*)")),n=localStorage.length-1;n>=0;--n){var r=localStorage.key(n);(r=(r=r&&r.match(t))&&r[1])&&r.indexOf(o)<0&&e(r,d(r))}}function w(e){var t=d(e);h(e),h(t)}function g(e){var t=d(e),n=p(t);if(n){var o=parseInt(n,10);if(f()>=o)return h(e),h(t),!0}}function v(e,t){c&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+e),t&&window.console.warn("lscache - The error was: "+t.message))}function b(e){return Math.floor(864e13/e)}return{set:function(e,t,n){if(!s())return!1;if(!l())return!1;try{t=JSON.stringify(t)}catch(e){return!1}try{m(e,t)}catch(n){if(!u(n))return v("Could not add item with key '"+e+"'",n),!1;var o,r=[];y((function(e,t){var n=p(t);n=n?parseInt(n,10):i,r.push({key:e,size:(p(e)||"").length,expiration:n})})),r.sort((function(e,t){return t.expiration-e.expiration}));for(var a=(t||"").length;r.length&&a>0;)o=r.pop(),v("Cache is full, removing item with key '"+e+"'"),w(o.key),a-=o.size;try{m(e,t)}catch(t){return v("Could not add item with key '"+e+"', perhaps it's too big?",t),!1}}return n?m(d(e),(f()+n).toString(10)):h(d(e)),!0},get:function(e){if(!s())return null;if(g(e))return null;var t=p(e);if(!t||!l())return t;try{return JSON.parse(t)}catch(e){return t}},remove:function(e){s()&&w(e)},supported:function(){return s()},flush:function(){s()&&y((function(e){w(e)}))},flushExpired:function(){s()&&y((function(e){g(e)}))},setBucket:function(e){a=e},resetBucket:function(){a=""},getExpiryMilliseconds:function(){return r},setExpiryMilliseconds:function(e){i=b(r=e)},enableWarnings:function(e){c=e}}})?n.apply(t,[]):n)||(e.exports=o)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}!function(){"use strict";class e{constructor(e){this.element=e.element,this.started=!1,this.name=e.name,this.options=e.options||{},this.children=e.children||{},e.querySelector&&Object.keys(e.querySelector).forEach((t=>{this.children[t]=this.element.querySelector(e.querySelector[t])})),e.querySelectorAll&&Object.keys(e.querySelectorAll).forEach((t=>{this.children[t]=this.element.querySelectorAll(e.querySelectorAll[t])}))}destroy(){this.element.parentNode.removeChild(this.element)}getOffsetTop(e,t){return t===e?0:e.offsetTop+this.getOffsetTop(e.parentElement,t)}static isChild(e,t){if(e){let n=e.parentNode;for(;n;){if(n===t)return!0;n=n.parentNode}}return!1}}var t=function(e,t){let n=!1;const o=[],r=function(){o.length&&!n&&(n=!0,o.shift().call(),setTimeout((()=>{n=!1,r()}),t))};return function(){o.push(e.bind(this,...arguments)),r()}};function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}n(6490),n(737);const{nbc:{brand:s="",callLetters:u="",env:l="",identity:d={},dataLayer:{domainName:f="",division:p=""},fullDomain:m=""},wp:{apiFetch:h}={}}=window,y="telemundo"===s?"cuenta":"account",w=e=>{switch(e){case"rsn":return"nbc_sports";case"telemundo":return"telemundo";default:return"nbc"}},g=e=>{switch(e.toUpperCase()){case"NSBO":return"NBCSB";case"NSBA":return"NBCSBA";case"NSPH":return"NBCSP";case"NSCH":return"NBCSC";default:return e}},v=()=>{const e=["preprod","production"].includes(l)?"id":"stage.id-envs";d.initialize((()=>{switch(p){case"rsn":return"rsnsweb";case"telemundo":return"telemundolocalweb";default:return"localstationsweb"}})(),{checkoutEnabled:!1,configLocationHost:`https://${e}.nbcuni.com/websdk/config`,debug:!0,env:["preprod","production"].includes(l)?"production":"stage",language:"telemundo"===s?"es":"en",native:!1,useBaseSdkLocation:!1,version:"2",crossDomain:!0,identityConfigOverrides:{brand:{product:m},crossDomain:{oAuthBrandLogo:`/websdk/assets/local/logos/${w(p)}/${g(u).toUpperCase()}_logo_${"maxTouchPoints"in navigator&&0<navigator.maxTouchPoints?window.matchMedia("(max-width: 767px)").matches?"mobile":"tablet":"desktop"}.svg`,redirectUrl:`https://${f}/${y}/`,clientId:(()=>{switch(p){case"rsn":return"rsn_web";case"telemundo":return"local_telemundo_web";default:return"local_nbc_web"}})()}}})},b=e=>{d.on("authenticationState",(t=>{e(t)}))},{nbc:{dataLayer:{contextData:k,pageName:S}}}=window,_=["prop1","prop2","prop3","prop4","prop8","prop9","prop10","prop20","prop21","prop22","prop23","prop48","prop52","prop53","prop54","prop55","eVar123","contextData.actionmodule","contextData.actionname","contextData.identityauth"];var E=(e,t,n)=>{if(console.log("unifiedTrackClick triggered: ",e,t),void 0===window.s)return;const{linkTrackVars:o,linkTrackEvents:r}=window.s;let i="unknown";b((e=>{["unauthenticated","authenticated"].includes(e)&&(i=e,k.identityauth=i)})),window.s.linkTrackVars=_.join(","),window.s.linkTrackEvents="";const a={prop21:n,prop52:S,prop53:e,prop54:`${S} | ${e}`,prop55:t,eVar123:i,contextData:{actionmodule:t,actionname:e,identityauth:i}};window.s.tl(void 0,"o",t,a),window.s.linkTrackVars=o,window.s.linkTrackEvents=r};var x,O=window.nbc,C=O.identityBrand,T=void 0===C?"default":C,L=O.identity,N=void 0===L?{}:L,P={name:"unifiedNav",class:function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(l,e);var t,n,i,s,u=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(i);if(s){var n=c(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return a(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).setTriggers(),t}return t=l,(n=[{key:"setTriggers",value:function(){var e=this.children,t=e.login,n=e.logout,o=e.dashboard,r=e.email,i=e.manageProfile,a=this.element,c=document.body;b((function(e){var t=document.querySelector(".identity-profile");"unknown"!==e&&null!==t&&t.classList.remove("identity-profile__loading"),"authenticated"===e?c.classList.add("identity-authenticated"):c.classList.remove("identity-authenticated"),E("identity state change","identity state change")})),a&&a.classList.contains("identity-profile")&&(null==a||a.addEventListener("click",(function(){(e=>{if(window.matchMedia("(max-width: 768px)").matches){const t=e.querySelector(".identity-profile__menu-container"),n="identity-profile__menu-container--show";t.classList.contains(n)?t.classList.remove(n):t.classList.add(n)}})(a)})));var s,u=function(e,t){var n="identity-profile-flyout"===e.target.parentElement.parentElement.className?"hamburger":"top nav";"top nav"===n&&"dashboard click"===t?E("dashboard","identity"):E(n,t)},l=function(e,t){e.addEventListener("click",(function(){"manage profile"===t?(N.openManageProfile(T),E(t,"dashboard click")):E(t,"identity"),"email preferences"===t&&N.openEmailPreferences(T)}))};t&&t.addEventListener("click",(function(e){return u(e,"sign in click"),console.log("idm: attached"),e.preventDefault(),((e=null)=>{const t=e?{saveBookmark:e}:{};d.launch({referringPage:"nbc-web-sdk-sample",registrationReferrer:"None",defaultPage:"createProfile",redirectUrl:`https://${f}/${y}/`,brandData:btoa(JSON.stringify(t))})})(),!1})),n&&(l(n,"sign out"),n.addEventListener("click",(function(e){return e.preventDefault(),d.unauthenticate(),!1}))),o&&o.addEventListener("click",(function(e){u(e,"dashboard click")})),r&&l(r,"email preferences"),i&&!i.dataset.trackingAttached&&("1"===(s=new URLSearchParams(window.location.search)).get("disableHeader")&&"1"===s.get("disableFooter")&&"app"===s.get("ref")&&(i.href="inapp://manageProfile"),l(i,"manage profile"),i.dataset.trackingAttached="true")}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(e),querySelector:{login:".identity-profile__signin",logout:".identity-profile__signout",dashboard:".identity-profile__menu-item--dashboard",email:".identity-profile__menu-item--email",manageProfile:".unified--manage-profile--link"}},j=new class{constructor(e){window[e]=window[e]?window[e]:{components:{}},window.jsComponentFrameworkLimiter=window.jsComponentFrameworkLimiter?window.jsComponentFrameworkLimiter:t,this.manifest=window[e],this.limiter=window.jsComponentFrameworkLimiter}initComponents(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;(Array.isArray(e)?e:[e]).forEach(this.limiter((e=>this.initComponent(e,t)),500))}initComponent(t,n){const o=t.name,r=t.class;if(r.prototype instanceof e){const e=Object.keys(this.manifest.components).includes(o),i=n.querySelectorAll("[data-component='".concat(o,"']"));if(!i.length)return void console.info('No elements found for data-component="'.concat(o,'"'));e||(this.manifest.components[o]={config:t,instances:[]}),Array.prototype.forEach.call(i,(e=>{const n=this.manifest.components[o].instances.some((t=>e.isSameNode(t.element)));if(n)return;const i=t;i.element=e;const a=new r(i);this.manifest.components[o].instances.push({instance:a,element:e})}))}}reinitComponent(e,t){const n=this.manifest.components[e].config;n&&this.initComponents([n],t)}static callComponentMethod(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.manifest[e]&&this.manifest[e].instances&&this.manifest[e].instances.forEach((e=>{"function"==typeof e[t]&&e[t].call(e,...n)}))}}("nbc-unified-components");x=function(){var e=window.nbc.identity;v(),e.on("status",(function(e){"initialized"===e&&j.initComponents([P])}))},"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",x):x()}()}();
//# sourceMappingURL=unifiedIdentity.44f090c74d46a8e9da4a.bundle.min.js.map